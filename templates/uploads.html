<!-- uploads.html (dynamically loaded inside teachers.html) -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/uploads.css') }}">

<div class="uploads-wrapper fade-in">

  <!-- HEADER -->
  <div class="uploads-header">
    <h3><i class="fa-solid fa-cloud-arrow-up text-accent"></i> Exam & Past Questions Uploads</h3>
    <p class="sub-text">Manage your teaching materials, upload exams, past questions, and push to student portal.</p>
  </div>

  <div class="uploads-grid">

    <!-- LEFT PANEL: Upload Section -->
    <section class="upload-panel">
      <h4><i class="fa-solid fa-upload"></i> Upload Files</h4>
      <p>Select or drag files to upload (CSV, XLSX, DOCX, JSON, PDF).</p>

      <div class="drop-box" id="uploadDropZone">
        <input type="file" id="uploadInput" multiple hidden accept=".csv,.xlsx,.docx,.json,.pdf" />
        <div class="drop-content">
          <i class="fa-solid fa-cloud-arrow-up upload-icon"></i>
          <p><strong>Drag & Drop</strong> or click below to choose files</p>
          <button id="chooseFiles" class="btn-primary small">Choose Files</button>
        </div>
      </div>

      <ul id="fileList" class="file-list"></ul>

      <div class="upload-actions">
        <button id="startUpload" class="btn-primary small"><i class="fa-solid fa-upload"></i> Start Upload</button>
        <button id="clearUploads" class="btn-secondary small"><i class="fa-solid fa-trash"></i> Clear</button>
      </div>

      <div id="uploadProgress" class="progress hidden">
        <div class="progress-bar"></div>
      </div>
    </section>


    <!-- MIDDLE PANEL: Uploaded Files Dashboard -->
    <section class="dashboard-panel">
      <h4><i class="fa-solid fa-table-list"></i> Uploaded Files</h4>
      <div class="search-bar">
        <input type="text" id="searchUploads" class="form-input" placeholder="ðŸ” Search by title or subject...">
      </div>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Title</th>
              <th>Subject</th>
              <th>Date</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="uploadedTable">
            <tr><td colspan="5" class="empty">No uploads yet</td></tr>
          </tbody>
        </table>
      </div>

      <div class="table-actions">
        <button id="editFile" class="btn-secondary small"><i class="fa-solid fa-pen"></i> Edit</button>
        <button id="deleteFile" class="btn-secondary small"><i class="fa-solid fa-trash"></i> Delete</button>
        <button id="previewFile" class="btn-primary small"><i class="fa-solid fa-eye"></i> Preview</button>
      </div>
    </section>


    <!-- RIGHT PANEL: Push to Portal -->
    <section class="push-panel">
      <h4><i class="fa-solid fa-paper-plane"></i> Push to Student Portal</h4>
      <p>Automatically convert uploaded content to JSON and send to student folders.</p>

      <div class="portal-preview">
        <i class="fa-solid fa-database db-icon"></i>
        <p class="text-sm text-gray">Ready to push <span id="pushCount">0</span> uploaded items to database</p>
      </div>

      <div class="push-actions">
        <button id="pushToPortal" class="btn-primary small">
          <i class="fa-solid fa-cloud-arrow-right"></i> Push to Portal
        </button>
        <button id="viewPortalJSON" class="btn-secondary small">
          <i class="fa-solid fa-code"></i> View JSON Preview
        </button>
      </div>

      <div id="portalLog" class="log-box"></div>
    </section>

  </div>
</div>

<script src="{{ url_for('static', filename='js/uploads.js') }}"></script>
